# Vue 3 + Vue Router를 이용한 페이지 전환

## 🚦 1. Vue Router란?

- Vue 애플리케이션에서 SPA(Single Page Application) 방식으로 페이지를 전환할 수 있게 해주는 공식 라우팅 라이브러리입니다.
- URL에 따라 다른 컴포넌트를 렌더링할 수 있도록 합니다.

---

## 🔧 2. 설치 및 기본 설정

```bash
npm install vue-router
```

### 📄 router/index.js 생성

```js
// src/router/index.js
import { createRouter, createWebHistory } from "vue-router";
import Home from "../views/Home.vue";
import About from "../views/About.vue";

const routes = [
  { path: "/", name: "Home", component: Home },
  { path: "/about", name: "About", component: About },
];

const router = createRouter({
  history: createWebHistory(),
  routes,
});

export default router;
```

---

## 🧩 3. main.js에 라우터 등록

```js
import { createApp } from "vue";
import App from "./App.vue";
import router from "./router";

const app = createApp(App);
app.use(router);
app.mount("#app");
```

> app.mount('#app') 란?

- Vue 애플리케이션을 HTML 문서의 특정 요소에 마운트(연결)하는 코드입니다.
- #app은 HTML에서 id="app"인 요소에 대한 선택자입니다.
- Vue 애플리케이션의 진입점 역할
- 선택한 DOM 요소 내부를 Vue의 제어 영역으로 만들어서 해당 요소 내부의 모든 내용이 Vue 에 의해 관리됨.
- 애플리케이션 초기화 시 한 번만 호출
- 라우터, 스토어 등 다른 플러그인 설정 후 마지막에 호출

---

## 🧭 4. 라우터 링크 및 뷰

```html
<!-- App.vue -->
<template>
  <nav>
    <RouterLink to="/">홈</RouterLink>
    <RouterLink to="/about">소개</RouterLink>
  </nav>
  <RouterView />
</template>
```

- `<RouterLink>`: HTML `<a>` 태그를 대체하며, 페이지 새로고침 없이 전환됨.
- `<RouterView>`: 현재 경로에 해당하는 컴포넌트를 렌더링.

---

## 🗺️ 5. 동적 라우트

동적 라우트는 URL 경로에 : 기호를 사용하여 동적 세그먼트를 정의합니다.

```js
{
  path: '/user/:id',
  name: 'User',
  component: () => import('../views/User.vue')
}
```

이 경우 /user/1, /user/2 등과 같은 URL이 모두 이 라우트에 매칭됩니다.

```html
<!-- User.vue -->
<script setup>
  import { useRoute } from "vue-router";
  const route = useRoute();
  const userId = route.params.id;
</script>

<template>
  <p>User ID: {{ userId }}</p>
</template>
```

### 동적 라우트의 활용 사례

- 사용자 프로필 페이지
  - /user/:id - 특정 사용자의 프로필 표시
  - /user/:id/posts - 특정 사용자의 게시물 목록
- 상품 상세 페이지
  - /product/:id - 특정 상품의 상세 정보
  - /category/:categoryId - 특정 카테고리의 상품 목록
- 게시판
  - /board/:boardId - 특정 게시판
  - /board/:boardId/post/:postId - 특정 게시판의 특정 게시물

---

## �� 6. 프로그래밍 방식의 라우팅

Vue Router는 컴포넌트 내에서 프로그래밍 방식으로 라우팅을 제어할 수 있는 다양한 API를 제공합니다.

### 6.1 기본적인 라우팅 메서드

```js
import { useRouter } from "vue-router";

const router = useRouter();

// 1. router.push() - 새로운 URL로 이동 (히스토리 기록)
router.push("/about");
router.push({ path: "/about" });
router.push({ name: "user", params: { id: "123" } });
router.push({ path: "/user", query: { plan: "private" } });

// 2. router.replace() - 현재 URL을 새로운 URL로 대체 (히스토리 기록 없음)
router.replace("/about");
router.replace({ path: "/about" });

// 3. router.go() - 브라우저 히스토리에서 이동
router.go(1); // 앞으로 한 페이지
router.go(-1); // 뒤로 한 페이지
router.go(-2); // 뒤로 두 페이지

// 4. router.back() - 이전 페이지로 이동 (router.go(-1)과 동일)
router.back();

// 5. router.forward() - 다음 페이지로 이동 (router.go(1)과 동일)
router.forward();
```

### 6.2 라우트 가드

```js
// 전역 가드 설정
router.beforeEach((to, from, next) => {
  // to: 이동할 라우트
  // from: 현재 라우트
  // next: 다음 단계로 진행하는 함수
  if (to.meta.requiresAuth && !isAuthenticated) {
    next("/login");
  } else {
    next();
  }
});

// 라우트 변경 후 실행
router.afterEach((to, from) => {
  console.log("라우트 변경 완료");
});
```

### 6.3 라우트 정보 접근

```js
import { useRoute } from "vue-router";

const route = useRoute();

// 현재 라우트 정보 접근
console.log(route.path); // 현재 경로
console.log(route.params); // URL 파라미터
console.log(route.query); // 쿼리 파라미터
console.log(route.name); // 라우트 이름
console.log(route.meta); // 라우트 메타 데이터
```

### 6.4 실제 사용 예시

```js
// 사용자 프로필 페이지로 이동
const goToProfile = (userId) => {
  router.push({
    name: "user-profile",
    params: { id: userId },
  });
};

// 검색 결과 페이지로 이동
const goToSearch = (keyword) => {
  router.push({
    path: "/search",
    query: { q: keyword },
  });
};

// 이전 페이지로 돌아가기
const goBack = () => {
  router.back();
};

// 특정 조건에서 다른 페이지로 리다이렉트
const checkAuth = () => {
  if (!isLoggedIn) {
    router.replace("/login");
  }
};
```

---

## ✅ 정리

- Vue Router는 SPA 애플리케이션에서 페이지 전환을 구현하는 핵심 도구입니다.
- 라우터 설정, 링크, 동적 라우트, 프로그래밍 방식 등 유연한 기능을 제공합니다.
- 다음 시간에는 Pinia를 이용한 상태 관리에 대해 배워보겠습니다.
